## Navigation Menu

- Platform Explore Integrations View all features
    - GitHub Copilot

        

        Write better code with AI
    - GitHub Spark

            
              New
            

        Build and deploy intelligent apps
    - GitHub Models

            
              New
            

        Manage and compare prompts
    - GitHub Advanced Security

        

        Find and fix vulnerabilities
    - Actions

        

        Automate any workflow
    - Codespaces

        

        Instant dev environments
    - Issues

        

        Plan and track work
    - Code Review

        

        Manage code changes
    - Discussions

        

        Collaborate outside of code
    - Code Search

        

        Find more, search less
    - Why GitHub
    - Documentation
    - GitHub Skills
    - Blog
    - GitHub Marketplace
    - MCP Registry
- Solutions By company size By use case By industry View all solutions

- Enterprises
- Small and medium teams
- Startups
- Nonprofits

- App Modernization
- DevSecOps
- DevOps
- CI/CD
- View all use cases

- Healthcare
- Financial services
- Manufacturing
- Government
- View all industries
- Resources Topics Explore

- AI
- DevOps
- Security
- Software Development
- View all

- Learning Pathways
- Events & Webinars
- Ebooks & Whitepapers
- Customer Stories
- Partners
- Executive Insights
- Open Source Repositories

- GitHub Sponsors

        

        Fund open source developers

- The ReadME Project

        

        GitHub community articles

- Topics
- Trending
- Collections
- Enterprise Available add-ons

- Enterprise platform

        

        AI-powered developer platform

- GitHub Advanced Security

        

        Enterprise-grade security features
- Copilot for business

        

        Enterprise-grade AI features
- Premium Support

        

        Enterprise-grade 24/7 support
- Pricing

# Search code, repositories, users, issues, pull requests...

# Provide feedback

We read every piece of feedback, and take your input very seriously.

# Saved searches

## Use saved searches to filter your results more quickly

To see all available qualifiers, see our documentation.

- Notifications
 You must be signed in to change notification settings
- Fork
    73
- Star
 603

Access to Anthropic's safety-first language model APIs via Go

### License

- Code
- Issues
25
- Pull requests
7
- Actions
- Projects
0
- Security

        Uh oh!

 There was an error while loading. Please reload this page.
- Insights

- Code
- Issues
- Pull requests
- Actions
- Projects
- Security
- Insights

# anthropics/anthropic-sdk-go

## Folders and files

| Name                                                                                                                         | Name                                                                                                                         | Name                                                                                                                         | Last commit message                                                    | Last commit date   |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|--------------------|
| Latest commitstainless-app[bot]release: 1.18.0successNov 14, 2025f4266c4 · Nov 14, 2025History350 CommitsOpen commit details | Latest commitstainless-app[bot]release: 1.18.0successNov 14, 2025f4266c4 · Nov 14, 2025History350 CommitsOpen commit details | Latest commitstainless-app[bot]release: 1.18.0successNov 14, 2025f4266c4 · Nov 14, 2025History350 CommitsOpen commit details |                                                                        |                    |
| .devcontainer                                                                                                                | .devcontainer                                                                                                                | .devcontainer                                                                                                                | chore: improve devcontainer setup                                      | May 21, 2025       |
| .github                                                                                                                      | .github                                                                                                                      | .github                                                                                                                      | fix: use release please annotations on more places                     | Sep 5, 2025        |
| bedrock                                                                                                                      | bedrock                                                                                                                      | bedrock                                                                                                                      | add test                                                               | Nov 5, 2025        |
| examples                                                                                                                     | examples                                                                                                                     | examples                                                                                                                     | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| internal                                                                                                                     | internal                                                                                                                     | internal                                                                                                                     | release: 1.18.0                                                        | Nov 14, 2025       |
| lib                                                                                                                          | lib                                                                                                                          | lib                                                                                                                          | feat: publish                                                          | Jul 30, 2024       |
| option                                                                                                                       | option                                                                                                                       | option                                                                                                                       | fix(client): process custom base url ahead of time                     | Aug 5, 2025        |
| packages                                                                                                                     | packages                                                                                                                     | packages                                                                                                                     | chore(internal): grammar fix (it's -> its)                             | Nov 5, 2025        |
| scripts                                                                                                                      | scripts                                                                                                                      | scripts                                                                                                                      | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| shared                                                                                                                       | shared                                                                                                                       | shared                                                                                                                       | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| vertex                                                                                                                       | vertex                                                                                                                       | vertex                                                                                                                       | remove test                                                            | Jul 3, 2025        |
| .gitignore                                                                                                                   | .gitignore                                                                                                                   | .gitignore                                                                                                                   | feat: publish                                                          | Jul 30, 2024       |
| .release-please-manifest.json                                                                                                | .release-please-manifest.json                                                                                                | .release-please-manifest.json                                                                                                | release: 1.18.0                                                        | Nov 14, 2025       |
| .stats.yml                                                                                                                   | .stats.yml                                                                                                                   | .stats.yml                                                                                                                   | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| Brewfile                                                                                                                     | Brewfile                                                                                                                     | Brewfile                                                                                                                     | docs: improve and reference contributing documentation (#21)           | Oct 4, 2024        |
| CHANGELOG.md                                                                                                                 | CHANGELOG.md                                                                                                                 | CHANGELOG.md                                                                                                                 | release: 1.18.0                                                        | Nov 14, 2025       |
| CONTRIBUTING.md                                                                                                              | CONTRIBUTING.md                                                                                                              | CONTRIBUTING.md                                                                                                              | chore: update more docs for 1.22                                       | Sep 29, 2025       |
| LICENSE                                                                                                                      | LICENSE                                                                                                                      | LICENSE                                                                                                                      | feat: publish                                                          | Jul 30, 2024       |
| README.md                                                                                                                    | README.md                                                                                                                    | README.md                                                                                                                    | release: 1.18.0                                                        | Nov 14, 2025       |
| SECURITY.md                                                                                                                  | SECURITY.md                                                                                                                  | SECURITY.md                                                                                                                  | chore: improve devcontainer setup                                      | May 21, 2025       |
| aliases.go                                                                                                                   | aliases.go                                                                                                                   | aliases.go                                                                                                                   | fix(client): fix bug where types occasionally wouldn't generate        | May 7, 2025        |
| api.md                                                                                                                       | api.md                                                                                                                       | api.md                                                                                                                       | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| beta.go                                                                                                                      | beta.go                                                                                                                      | beta.go                                                                                                                      | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| betafile.go                                                                                                                  | betafile.go                                                                                                                  | betafile.go                                                                                                                  | fix: use slices.Concat instead of sometimes modifying r.Options        | Sep 29, 2025       |
| betafile\_test.go                                                                                                             | betafile\_test.go                                                                                                             | betafile\_test.go                                                                                                             | feat(api): add claude 4 models, files API, code execution tool, MCP c… | May 22, 2025       |
| betamessage.go                                                                                                               | betamessage.go                                                                                                               | betamessage.go                                                                                                               | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| betamessage\_test.go                                                                                                          | betamessage\_test.go                                                                                                          | betamessage\_test.go                                                                                                          | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| betamessagebatch.go                                                                                                          | betamessagebatch.go                                                                                                          | betamessagebatch.go                                                                                                          | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| betamessagebatch\_test.go                                                                                                     | betamessagebatch\_test.go                                                                                                     | betamessagebatch\_test.go                                                                                                     | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| betamodel.go                                                                                                                 | betamodel.go                                                                                                                 | betamodel.go                                                                                                                 | fix: use slices.Concat instead of sometimes modifying r.Options        | Sep 29, 2025       |
| betamodel\_test.go                                                                                                            | betamodel\_test.go                                                                                                            | betamodel\_test.go                                                                                                            | feat(api): adds web search capabilities to the Claude API              | May 7, 2025        |
| betaskill.go                                                                                                                 | betaskill.go                                                                                                                 | betaskill.go                                                                                                                 | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| betaskill\_test.go                                                                                                            | betaskill\_test.go                                                                                                            | betaskill\_test.go                                                                                                            | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| betaskillversion.go                                                                                                          | betaskillversion.go                                                                                                          | betaskillversion.go                                                                                                          | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| betaskillversion\_test.go                                                                                                     | betaskillversion\_test.go                                                                                                     | betaskillversion\_test.go                                                                                                     | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| client.go                                                                                                                    | client.go                                                                                                                    | client.go                                                                                                                    | fix: use slices.Concat instead of sometimes modifying r.Options        | Sep 29, 2025       |
| client\_test.go                                                                                                               | client\_test.go                                                                                                               | client\_test.go                                                                                                               | feat(api): makes 1 hour TTL Cache Control generally available          | Sep 2, 2025        |
| completion.go                                                                                                                | completion.go                                                                                                                | completion.go                                                                                                                | feat(api): adding support for agent skills                             | Oct 16, 2025       |
| completion\_test.go                                                                                                           | completion\_test.go                                                                                                           | completion\_test.go                                                                                                           | feat(api): adds web search capabilities to the Claude API              | May 7, 2025        |
| field.go                                                                                                                     | field.go                                                                                                                     | field.go                                                                                                                     | feat(api)!: migrate to v2                                              | Mar 25, 2025       |
| go.mod                                                                                                                       | go.mod                                                                                                                       | go.mod                                                                                                                       | fixup examples                                                         | Aug 12, 2025       |
| go.sum                                                                                                                       | go.sum                                                                                                                       | go.sum                                                                                                                       | fixup examples                                                         | Aug 12, 2025       |
| message.go                                                                                                                   | message.go                                                                                                                   | message.go                                                                                                                   | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| message\_test.go                                                                                                              | message\_test.go                                                                                                              | message\_test.go                                                                                                              | feat(api): add ability to clear thinking in context management         | Oct 28, 2025       |
| messagebatch.go                                                                                                              | messagebatch.go                                                                                                              | messagebatch.go                                                                                                              | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| messagebatch\_test.go                                                                                                         | messagebatch\_test.go                                                                                                         | messagebatch\_test.go                                                                                                         | feat(api): add ability to clear thinking in context management         | Oct 28, 2025       |
| model.go                                                                                                                     | model.go                                                                                                                     | model.go                                                                                                                     | fix: use slices.Concat instead of sometimes modifying r.Options        | Sep 29, 2025       |
| model\_test.go                                                                                                                | model\_test.go                                                                                                                | model\_test.go                                                                                                                | feat(api): adds web search capabilities to the Claude API              | May 7, 2025        |
| paginationauto\_test.go                                                                                                       | paginationauto\_test.go                                                                                                       | paginationauto\_test.go                                                                                                       | feat(api)!: migrate to v2                                              | Mar 25, 2025       |
| paginationmanual\_test.go                                                                                                     | paginationmanual\_test.go                                                                                                     | paginationmanual\_test.go                                                                                                     | feat(api)!: migrate to v2                                              | Mar 25, 2025       |
| release-please-config.json                                                                                                   | release-please-config.json                                                                                                   | release-please-config.json                                                                                                   | fix: use release please annotations on more places                     | Sep 5, 2025        |
| schemautil.go                                                                                                                | schemautil.go                                                                                                                | schemautil.go                                                                                                                | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| schemautil\_test.go                                                                                                           | schemautil\_test.go                                                                                                           | schemautil\_test.go                                                                                                           | feat(api): add support for structured outputs beta                     | Nov 14, 2025       |
| usage\_test.go                                                                                                                | usage\_test.go                                                                                                                | usage\_test.go                                                                                                                | feat(api): makes 1 hour TTL Cache Control generally available          | Sep 2, 2025        |
| View all files                                                                                                               | View all files                                                                                                               | View all files                                                                                                               |                                                                        |                    |

## Repository files navigation

- README
- Contributing
- MIT license
- Security

# Anthropic Go API Library

The Anthropic Go library provides convenient access to the Anthropic REST API
from applications written in Go.

## Installation

```
import (
	"github.com/anthropics/anthropic-sdk-go" // imported as anthropic
)
```

Or to pin the version:

```
go get -u 'github.com/anthropics/anthropic-sdk-go@v1.18.0'
```

## Requirements

This library requires Go 1.22+.

## Usage

The full API of this library can be found in api.md.

```
package main

import (
	"context"
	"fmt"

	"github.com/anthropics/anthropic-sdk-go"
	"github.com/anthropics/anthropic-sdk-go/option"
)

func main() {
	client := anthropic.NewClient(
		option.WithAPIKey("my-anthropic-api-key"), // defaults to os.LookupEnv("ANTHROPIC\_API\_KEY")
	)
	message, err := client.Messages.New(context.TODO(), anthropic.MessageNewParams{
		MaxTokens: 1024,
		Messages: []anthropic.MessageParam{
			anthropic.NewUserMessage(anthropic.NewTextBlock("What is a quaternion?")),
		},
		Model: anthropic.ModelClaudeSonnet4\_5\_20250929,
	})
	if err != nil {
		panic(err.Error())
	}
	fmt.Printf("%+v\n", message.Content)
}
```

```
messages := []anthropic.MessageParam{
    anthropic.NewUserMessage(anthropic.NewTextBlock("What is my first name?")),
}

message, err := client.Messages.New(context.TODO(), anthropic.MessageNewParams{
    Model:     anthropic.ModelClaudeSonnet4\_5\_20250929,
    Messages:  messages,
    MaxTokens: 1024,
})
if err != nil {
    panic(err)
}

fmt.Printf("%+v\n", message.Content)

messages = append(messages, message.ToParam())
messages = append(messages, anthropic.NewUserMessage(
    anthropic.NewTextBlock("My full name is John Doe"),
))

message, err = client.Messages.New(context.TODO(), anthropic.MessageNewParams{
    Model:     anthropic.ModelClaudeSonnet4\_5\_20250929,
    Messages:  messages,
    MaxTokens: 1024,
})

fmt.Printf("%+v\n", message.Content)
```

```
message, err := client.Messages.New(context.TODO(), anthropic.MessageNewParams{
    Model:     anthropic.ModelClaudeSonnet4\_5\_20250929,
    MaxTokens: 1024,
    System: []anthropic.TextBlockParam{
        {Text: "Be very serious at all times."},
    },
    Messages: messages,
})
```

```
content := "What is a quaternion?"

stream := client.Messages.NewStreaming(context.TODO(), anthropic.MessageNewParams{
    Model:     anthropic.ModelClaudeSonnet4\_5\_20250929,
    MaxTokens: 1024,
    Messages: []anthropic.MessageParam{
        anthropic.NewUserMessage(anthropic.NewTextBlock(content)),
    },
})

message := anthropic.Message{}
for stream.Next() {
    event := stream.Current()
    err := message.Accumulate(event)
    if err != nil {
        panic(err)
    }

    switch eventVariant := event.AsAny().(type) {
        case anthropic.ContentBlockDeltaEvent:
        switch deltaVariant := eventVariant.Delta.AsAny().(type) {
        case anthropic.TextDelta:
            print(deltaVariant.Text)
        }

    }
}

if stream.Err() != nil {
    panic(stream.Err())
}
```

```
package main

import (
	"context"
	"encoding/json"
	"fmt"

	"github.com/anthropics/anthropic-sdk-go"
	"github.com/invopop/jsonschema"
)

func main() {
	client := anthropic.NewClient()

	content := "Where is San Francisco?"

	println("[user]: " + content)

	messages := []anthropic.MessageParam{
		anthropic.NewUserMessage(anthropic.NewTextBlock(content)),
	}

	toolParams := []anthropic.ToolParam{
		{
			Name:        "get\_coordinates",
			Description: anthropic.String("Accepts a place as an address, then returns the latitude and longitude coordinates."),
			InputSchema: GetCoordinatesInputSchema,
		},
	}
	tools := make([]anthropic.ToolUnionParam, len(toolParams))
	for i, toolParam := range toolParams {
		tools[i] = anthropic.ToolUnionParam{OfTool: &toolParam}
	}

	for {
		message, err := client.Messages.New(context.TODO(), anthropic.MessageNewParams{
			Model:     anthropic.ModelClaudeSonnet4\_5\_20250929,
			MaxTokens: 1024,
			Messages:  messages,
			Tools:     tools,
		})

		if err != nil {
			panic(err)
		}

		print(color("[assistant]: "))
		for \_, block := range message.Content {
			switch block := block.AsAny().(type) {
			case anthropic.TextBlock:
				println(block.Text)
				println()
			case anthropic.ToolUseBlock:
				inputJSON, \_ := json.Marshal(block.Input)
				println(block.Name + ": " + string(inputJSON))
				println()
			}
		}

		messages = append(messages, message.ToParam())
		toolResults := []anthropic.ContentBlockParamUnion{}

		for \_, block := range message.Content {
			switch variant := block.AsAny().(type) {
			case anthropic.ToolUseBlock:
				print(color("[user (" + block.Name + ")]: "))

				var response interface{}
				switch block.Name {
				case "get\_coordinates":
					var input struct {
						Location string `json:"location"`
					}

					err := json.Unmarshal([]byte(variant.JSON.Input.Raw()), &input)
					if err != nil {
						panic(err)
					}

					response = GetCoordinates(input.Location)
				}

				b, err := json.Marshal(response)
				if err != nil {
					panic(err)
				}

				println(string(b))

				toolResults = append(toolResults, anthropic.NewToolResultBlock(block.ID, string(b), false))
			}

		}
		if len(toolResults) == 0 {
			break
		}
		messages = append(messages, anthropic.NewUserMessage(toolResults...))
	}
}

type GetCoordinatesInput struct {
	Location string `json:"location" jsonschema\_description:"The location to look up."`
}

var GetCoordinatesInputSchema = GenerateSchema[GetCoordinatesInput]()

type GetCoordinateResponse struct {
	Long float64 `json:"long"`
	Lat  float64 `json:"lat"`
}

func GetCoordinates(location string) GetCoordinateResponse {
	return GetCoordinateResponse{
		Long: -122.4194,
		Lat:  37.7749,
	}
}

func GenerateSchema[T any]() anthropic.ToolInputSchemaParam {
	reflector := jsonschema.Reflector{
		AllowAdditionalProperties: false,
		DoNotReference:            true,
	}
	var v T

	schema := reflector.Reflect(v)

	return anthropic.ToolInputSchemaParam{
		Properties: schema.Properties,
	}
}

func color(s string) string {
	return fmt.Sprintf("\033[1;%sm%s\033[0m", "33", s)
}
```

### Request fields

The anthropic library uses the omitzero
semantics from the Go 1.24+ encoding/json release for request fields.

Required primitive fields (int64, string, etc.) feature the tag `json:"...,required"`. These
fields are always serialized, even their zero values.

Optional primitive types are wrapped in a param.Opt[T]. These fields can be set with the provided constructors, anthropic.String(string), anthropic.Int(int64), etc.

Any param.Opt[T], map, slice, struct or string enum uses the
tag `json:"...,omitzero"`. Its zero value is considered omitted.

The param.IsOmitted(any) function can confirm the presence of any omitzero field.

```
p := anthropic.ExampleParams{
	ID:   "id\_xxx",                // required property
	Name: anthropic.String("..."), // optional property

	Point: anthropic.Point{
		X: 0,                // required field will serialize as 0
		Y: anthropic.Int(1), // optional field will serialize as 1
		// ... omitted non-required fields will not be serialized
	},

	Origin: anthropic.Origin{}, // the zero value of [Origin] is considered omitted
}
```

To send null instead of a param.Opt[T], use param.Null[T]().
To send null instead of a struct T, use param.NullStruct[T]().

```
p.Name = param.Null[string]()       // 'null' instead of string
p.Point = param.NullStruct[Point]() // 'null' instead of struct

param.IsNull(p.Name)  // true
param.IsNull(p.Point) // true
```

Request structs contain a .SetExtraFields(map[string]any) method which can send non-conforming
fields in the request body. Extra fields overwrite any struct fields with a matching
key.

Warning

For security reasons, only use SetExtraFields with trusted data.

To send a custom value instead of a struct, use param.Override[T](value).

```
// In cases where the API specifies a given type,
// but you want to send something else, use [SetExtraFields]:
p.SetExtraFields(map[string]any{
	"x": 0.01, // send "x" as a float instead of int
})

// Send a number instead of an object
custom := param.Override[anthropic.FooParams](12)
```

### Request unions

Unions are represented as a struct with fields prefixed by "Of" for each of its variants,
only one field can be non-zero. The non-zero field will be serialized.

Sub-properties of the union can be accessed via methods on the union struct.
These methods return a mutable pointer to the underlying data, if present.

```
// Only one field can be non-zero, use param.IsOmitted() to check if a field is set
type AnimalUnionParam struct {
	OfCat *Cat `json:",omitzero,inline`
	OfDog *Dog `json:",omitzero,inline`
}

animal := AnimalUnionParam{
	OfCat: &Cat{
		Name: "Whiskers",
		Owner: PersonParam{
			Address: AddressParam{Street: "3333 Coyote Hill Rd", Zip: 0},
		},
	},
}

// Mutating a field
if address := animal.GetOwner().GetAddress(); address != nil {
	address.ZipCode = 94304
}
```

### Response objects

All fields in response structs are ordinary value types (not pointers or wrappers).
Response structs also include a special JSON field containing metadata about
each property.

```
type Animal struct {
	Name   string `json:"name,nullable"`
	Owners int    `json:"owners"`
	Age    int    `json:"age"`
	JSON   struct {
		Name        respjson.Field
		Owner       respjson.Field
		Age         respjson.Field
		ExtraFields map[string]respjson.Field
	} `json:"-"`
}
```

To handle optional data, use the .Valid() method on the JSON field.
.Valid() returns true if a field is not null, not present, or couldn't be marshaled.

If .Valid() is false, the corresponding field will simply be its zero value.

```
raw := `{"owners": 1, "name": null}`

var res Animal
json.Unmarshal([]byte(raw), &res)

// Accessing regular fields

res.Owners // 1
res.Name   // ""
res.Age    // 0

// Optional field checks

res.JSON.Owners.Valid() // true
res.JSON.Name.Valid()   // false
res.JSON.Age.Valid()    // false

// Raw JSON values

res.JSON.Owners.Raw()                  // "1"
res.JSON.Name.Raw() == "null"          // true
res.JSON.Name.Raw() == respjson.Null   // true
res.JSON.Age.Raw() == ""               // true
res.JSON.Age.Raw() == respjson.Omitted // true
```

These .JSON structs also include an ExtraFields map containing
any properties in the json response that were not specified
in the struct. This can be useful for API features not yet
present in the SDK.

```
body := res.JSON.ExtraFields["my\_unexpected\_field"].Raw()
```

### Response Unions

In responses, unions are represented by a flattened struct containing all possible fields from each of the
object variants.
To convert it to a variant use the .AsFooVariant() method or the .AsAny() method if present.

If a response value union contains primitive values, primitive fields will be alongside
the properties but prefixed with Of and feature the tag json:"...,inline".

```
type AnimalUnion struct {
	// From variants [Dog], [Cat]
	Owner Person `json:"owner"`
	// From variant [Dog]
	DogBreed string `json:"dog\_breed"`
	// From variant [Cat]
	CatBreed string `json:"cat\_breed"`
	// ...

	JSON struct {
		Owner respjson.Field
		// ...
	} `json:"-"`
}

// If animal variant
if animal.Owner.Address.ZipCode == "" {
	panic("missing zip code")
}

// Switch on the variant
switch variant := animal.AsAny().(type) {
case Dog:
case Cat:
default:
	panic("unexpected type")
}
```

### RequestOptions

This library uses the functional options pattern. Functions defined in the
option package return a RequestOption, which is a closure that mutates a
RequestConfig. These options can be supplied to the client or at individual
requests. For example:

```
client := anthropic.NewClient(
	// Adds a header to every request made by the client
	option.WithHeader("X-Some-Header", "custom\_header\_info"),
)

client.Messages.New(context.TODO(), ...,
	// Override the header
	option.WithHeader("X-Some-Header", "some\_other\_custom\_header\_info"),
	// Add an undocumented field to the request body, using sjson syntax
	option.WithJSONSet("some.json.path", map[string]string{"my": "object"}),
)
```

The request option option.WithDebugLog(nil) may be helpful while debugging.

See the full list of request options.

### Pagination

This library provides some conveniences for working with paginated list endpoints.

You can use .ListAutoPaging() methods to iterate through items across all pages:

```
iter := client.Messages.Batches.ListAutoPaging(context.TODO(), anthropic.MessageBatchListParams{
	Limit: anthropic.Int(20),
})
// Automatically fetches more pages as needed.
for iter.Next() {
	messageBatch := iter.Current()
	fmt.Printf("%+v\n", messageBatch)
}
if err := iter.Err(); err != nil {
	panic(err.Error())
}
```

Or you can use simple .List() methods to fetch a single page and receive a standard response object
with additional helper methods like .GetNextPage(), e.g.:

```
page, err := client.Messages.Batches.List(context.TODO(), anthropic.MessageBatchListParams{
	Limit: anthropic.Int(20),
})
for page != nil {
	for \_, batch := range page.Data {
		fmt.Printf("%+v\n", batch)
	}
	page, err = page.GetNextPage()
}
if err != nil {
	panic(err.Error())
}
```

### Errors

When the API returns a non-success status code, we return an error with type
*anthropic.Error. This contains the StatusCode, *http.Request, and
*http.Response values of the request, as well as the JSON of the error body
(much like other response objects in the SDK). The error also includes the RequestID
from the response headers, which is useful for troubleshooting with Anthropic support.

To handle errors, we recommend that you use the errors.As pattern:

```
\_, err := client.Messages.New(context.TODO(), anthropic.MessageNewParams{
	MaxTokens: 1024,
	Messages: []anthropic.MessageParam{{
		Content: []anthropic.ContentBlockParamUnion{{
			OfText: &anthropic.TextBlockParam{Text: "What is a quaternion?", CacheControl: anthropic.CacheControlEphemeralParam{TTL: anthropic.CacheControlEphemeralTTLTTL5m}, Citations: []anthropic.TextCitationParamUnion{{
				OfCharLocation: &anthropic.CitationCharLocationParam{CitedText: "cited\_text", DocumentIndex: 0, DocumentTitle: anthropic.String("x"), EndCharIndex: 0, StartCharIndex: 0},
			}}},
		}},
		Role: anthropic.MessageParamRoleUser,
	}},
	Model: anthropic.ModelClaudeSonnet4\_5\_20250929,
})
if err != nil {
	var apierr *anthropic.Error
	if errors.As(err, &apierr) {
		println("Request ID:", apierr.RequestID)
		println(string(apierr.DumpRequest(true)))  // Prints the serialized HTTP request
		println(string(apierr.DumpResponse(true))) // Prints the serialized HTTP response
	}
	panic(err.Error()) // GET "/v1/messages": 400 Bad Request (Request-ID: req\_xxx) { ... }
}
```

When other errors occur, they are returned unwrapped; for example,
if HTTP transport fails, you might receive *url.Error wrapping *net.OpError.

### Timeouts

Requests do not time out by default; use context to configure a timeout for a request lifecycle.

Note that if a request is retried, the context timeout does not start over.
To set a per-retry timeout, use option.WithRequestTimeout().

```
// This sets the timeout for the request, including all the retries.
ctx, cancel := context.WithTimeout(context.Background(), 5*time.Minute)
defer cancel()
client.Messages.New(
	ctx,
	anthropic.MessageNewParams{
		MaxTokens: 1024,
		Messages: []anthropic.MessageParam{{
			Content: []anthropic.ContentBlockParamUnion{{
				OfRequestTextBlock: &anthropic.TextBlockParam{Text: "What is a quaternion?"},
			}},
			Role: anthropic.MessageParamRoleUser,
		}},
		Model: anthropic.ModelClaudeSonnet4\_5\_20250929,
	},
	// This sets the per-retry timeout
	option.WithRequestTimeout(20*time.Second),
)
```

### Long Requests

Important

We highly encourage you use the streaming Messages API for longer running requests.

We do not recommend setting a large MaxTokens value without using streaming as some networks may drop idle connections after a certain period of time, which
can cause the request to fail or timeout without receiving a response from Anthropic.

This SDK will also return an error if a non-streaming request is expected to be above roughly 10 minutes long.
Calling .Messages.NewStreaming() or setting a custom timeout disables this error.

### File uploads

Request parameters that correspond to file uploads in multipart requests are typed as
io.Reader. The contents of the io.Reader will by default be sent as a multipart form
part with the file name of "anonymous\_file" and content-type of "application/octet-stream", so we
recommend always specifyig a custom content-type with the anthropic.File(reader io.Reader, filename string, contentType string)
helper we provide to easily wrap any io.Reader with the appropriate file name and content type.

```
// A file from the file system
file, err := os.Open("/path/to/file.json")
anthropic.BetaFileUploadParams{
	File: anthropic.File(file, "custom-name.json", "application/json"),
	Betas: []anthropic.AnthropicBeta{anthropic.AnthropicBetaFilesAPI2025\_04\_14},
}

// A file from a string
anthropic.BetaFileUploadParams{
	File: anthropic.File(strings.NewReader("my file contents"), "custom-name.json", "application/json"),
	Betas: []anthropic.AnthropicBeta{anthropic.AnthropicBetaFilesAPI2025\_04\_14},
}
```

The file name and content-type can also be customized by implementing Name() string or ContentType() string on the run-time type of io.Reader. Note that os.File implements Name() string, so a
file returned by os.Open will be sent with the file name on disk.

### Retries

Certain errors will be automatically retried 2 times by default, with a short exponential backoff.
We retry by default all connection errors, 408 Request Timeout, 409 Conflict, 429 Rate Limit,
and >=500 Internal errors.

You can use the WithMaxRetries option to configure or disable this:

```
// Configure the default for all requests:
client := anthropic.NewClient(
	option.WithMaxRetries(0), // default is 2
)

// Override per-request:
client.Messages.New(
	context.TODO(),
	anthropic.MessageNewParams{
		MaxTokens: 1024,
		Messages: []anthropic.MessageParam{{
			Content: []anthropic.ContentBlockParamUnion{{
				OfRequestTextBlock: &anthropic.TextBlockParam{Text: "What is a quaternion?"},
			}},
			Role: anthropic.MessageParamRoleUser,
		}},
		Model: anthropic.ModelClaudeSonnet4\_5\_20250929,
	},
	option.WithMaxRetries(5),
)
```

### Accessing raw response data (e.g. response headers)

You can access the raw HTTP response data by using the option.WithResponseInto() request option. This is useful when
you need to examine response headers, status codes, or other details.

```
// Create a variable to store the HTTP response
var response *http.Response
message, err := client.Messages.New(
	context.TODO(),
	anthropic.MessageNewParams{
		MaxTokens: 1024,
		Messages: []anthropic.MessageParam{{
			Content: []anthropic.ContentBlockParamUnion{{
				OfText: &anthropic.TextBlockParam{Text: "What is a quaternion?", CacheControl: anthropic.CacheControlEphemeralParam{TTL: anthropic.CacheControlEphemeralTTLTTL5m}, Citations: []anthropic.TextCitationParamUnion{{
					OfCharLocation: &anthropic.CitationCharLocationParam{CitedText: "cited\_text", DocumentIndex: 0, DocumentTitle: anthropic.String("x"), EndCharIndex: 0, StartCharIndex: 0},
				}}},
			}},
			Role: anthropic.MessageParamRoleUser,
		}},
		Model: anthropic.ModelClaudeSonnet4\_5\_20250929,
	},
	option.WithResponseInto(&response),
)
if err != nil {
	// handle error
}
fmt.Printf("%+v\n", message)

fmt.Printf("Status Code: %d\n", response.StatusCode)
fmt.Printf("Headers: %+#v\n", response.Header)
```

### Making custom/undocumented requests

This library is typed for convenient access to the documented API. If you need to access undocumented
endpoints, params, or response properties, the library can still be used.

#### Undocumented endpoints

To make requests to undocumented endpoints, you can use client.Get, client.Post, and other HTTP verbs.
RequestOptions on the client, such as retries, will be respected when making these requests.

```
var (
    // params can be an io.Reader, a []byte, an encoding/json serializable object,
    // or a "…Params" struct defined in this library.
    params map[string]any

    // result can be an []byte, *http.Response, a encoding/json deserializable object,
    // or a model defined in this library.
    result *http.Response
)
err := client.Post(context.Background(), "/unspecified", params, &result)
if err != nil {
    …
}
```

#### Undocumented request params

To make requests using undocumented parameters, you may use either the option.WithQuerySet()
or the option.WithJSONSet() methods.

```
params := FooNewParams{
    ID:   "id\_xxxx",
    Data: FooNewParamsData{
        FirstName: anthropic.String("John"),
    },
}
client.Foo.New(context.Background(), params, option.WithJSONSet("data.last\_name", "Doe"))
```

#### Undocumented response properties

To access undocumented response properties, you may either access the raw JSON of the response as a string
with result.JSON.RawJSON(), or get the raw JSON of a particular field on the result with
result.JSON.Foo.Raw().

Any fields that are not present on the response struct will be saved and can be accessed by result.JSON.ExtraFields() which returns the extra fields as a map[string]Field.

### Middleware

We provide option.WithMiddleware which applies the given
middleware to requests.

```
func Logger(req *http.Request, next option.MiddlewareNext) (res *http.Response, err error) {
	// Before the request
	start := time.Now()
	LogReq(req)

	// Forward the request to the next handler
	res, err = next(req)

	// Handle stuff after the request
	end := time.Now()
	LogRes(res, err, start - end)

    return res, err
}

client := anthropic.NewClient(
	option.WithMiddleware(Logger),
)
```

When multiple middlewares are provided as variadic arguments, the middlewares
are applied left to right. If option.WithMiddleware is given
multiple times, for example first in the client then the method, the
middleware in the client will run first and the middleware given in the method
will run next.

You may also replace the default http.Client with
option.WithHTTPClient(client). Only one http client is
accepted (this overwrites any previous client) and receives requests after any
middleware has been applied.

## Amazon Bedrock

To use this library with Amazon Bedrock,
use the bedrock request option bedrock.WithLoadDefaultConfig(…) which reads the
default config.

Importing the bedrock library also globally registers a decoder for application/vnd.amazon.eventstream for
streaming.

```
package main

import (
	"github.com/anthropics/anthropic-sdk-go"
	"github.com/anthropics/anthropic-sdk-go/bedrock"
)

func main() {
	client := anthropic.NewClient(
		bedrock.WithLoadDefaultConfig(context.Background()),
	)
}
```

If you already have an aws.Config, you can also use it directly with bedrock.WithConfig(cfg).

Read more about Anthropic and Amazon Bedrock here.

## Google Vertex AI

To use this library with Google Vertex AI,
use the request option vertex.WithGoogleAuth(…) which reads the
Application Default Credentials.

```
package main

import (
	"context"

	"github.com/anthropics/anthropic-sdk-go"
	"github.com/anthropics/anthropic-sdk-go/vertex"
)

func main() {
	client := anthropic.NewClient(
		vertex.WithGoogleAuth(context.Background(), "us-central1", "id-xxx"),
	)
}
```

If you already have *google.Credentials, you can also use it directly with
vertex.WithCredentials(ctx, region, projectId, creds).

Read more about Anthropic and Google Vertex here.

## Semantic versioning

This package generally follows SemVer conventions, though certain backwards-incompatible changes may be released as minor versions:

1. Changes to library internals which are technically public but not intended or documented for external use. (Please open a GitHub issue to let us know if you are relying on such internals.)
2. Changes that we do not expect to impact the vast majority of users in practice.

We take backwards-compatibility seriously and work hard to ensure you can rely on a smooth upgrade experience.

We are keen for your feedback; please open an issue with questions, bugs, or suggestions.

## Contributing

See the contributing documentation.

## About

Access to Anthropic's safety-first language model APIs via Go

### Resources

### License

### Contributing

### Security policy

### Uh oh!

There was an error while loading. Please reload this page.

### Stars

### Watchers

### Forks

## Releases
      43

## Packages
      0

## Used by 651

- 
- 
- 
- 
- 
- 
- 
- 

## Contributors
      20

- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 

## Languages

- Go
99.7%
- Other
0.3%

## Footer

### Footer navigation

- Terms
- Privacy
- Security
- Status
- Community
- Docs
- Contact
- Manage cookies
- Do not share my personal information